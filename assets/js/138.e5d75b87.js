(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{577:function(t,e,a){"use strict";a.r(e);var d=a(1),o=Object(d.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"state"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#state"}},[t._v("#")]),t._v(" State")]),t._v(" "),e("h2",{attrs:{id:"state-objects"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#state-objects"}},[t._v("#")]),t._v(" State Objects")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("x/erc20")]),t._v(" module keeps the following objects in state:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("State Object")]),t._v(" "),e("th",[t._v("Description")]),t._v(" "),e("th",[t._v("Key")]),t._v(" "),e("th",[t._v("Value")]),t._v(" "),e("th",[t._v("Store")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("TokenPair")])]),t._v(" "),e("td",[t._v("Token Pair bytecode")]),t._v(" "),e("td",[e("code",[t._v("[]byte{1} + []byte(id)")])]),t._v(" "),e("td",[e("code",[t._v("[]byte{tokenPair}")])]),t._v(" "),e("td",[t._v("KV")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("TokenPairByERC20")])]),t._v(" "),e("td",[t._v("Token Pair id bytecode by erc20 contract bytes")]),t._v(" "),e("td",[e("code",[t._v("[]byte{2} + []byte(erc20)")])]),t._v(" "),e("td",[e("code",[t._v("[]byte(id)")])]),t._v(" "),e("td",[t._v("KV")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("TokenPairByDenom")])]),t._v(" "),e("td",[t._v("Token Pair id bytecode by denom string")]),t._v(" "),e("td",[e("code",[t._v("[]byte{3} + []byte(denom)")])]),t._v(" "),e("td",[e("code",[t._v("[]byte(id)")])]),t._v(" "),e("td",[t._v("KV")])])])]),t._v(" "),e("h3",{attrs:{id:"token-pair"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#token-pair"}},[t._v("#")]),t._v(" Token Pair")]),t._v(" "),e("p",[t._v("One-to-one mapping of native Cosmos coin denomination to ERC20 token contract addresses (i.e "),e("code",[t._v("sdk.Coin")]),t._v(" ←→ ERC20).")]),t._v(" "),e("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"dHlwZSBUb2tlblBhaXIgc3RydWN0IHsKCS8vIGFkZHJlc3Mgb2YgRVJDMjAgY29udHJhY3QgdG9rZW4KCUVyYzIwQWRkcmVzcyBzdHJpbmcgYHByb3RvYnVmOiZxdW90O2J5dGVzLDEsb3B0LG5hbWU9ZXJjMjBfYWRkcmVzcyxqc29uPWVyYzIwQWRkcmVzcyxwcm90bzMmcXVvdDsganNvbjomcXVvdDtlcmMyMF9hZGRyZXNzLG9taXRlbXB0eSZxdW90O2AKCS8vIGNvc21vcyBiYXNlIGRlbm9taW5hdGlvbiB0byBiZSBtYXBwZWQgdG8KCURlbm9tIHN0cmluZyBgcHJvdG9idWY6JnF1b3Q7Ynl0ZXMsMixvcHQsbmFtZT1kZW5vbSxwcm90bzMmcXVvdDsganNvbjomcXVvdDtkZW5vbSxvbWl0ZW1wdHkmcXVvdDtgCgkvLyBzaG93cyB0b2tlbiBtYXBwaW5nIGVuYWJsZSBzdGF0dXMKCUVuYWJsZWQgYm9vbCBgcHJvdG9idWY6JnF1b3Q7dmFyaW50LDMsb3B0LG5hbWU9ZW5hYmxlZCxwcm90bzMmcXVvdDsganNvbjomcXVvdDtlbmFibGVkLG9taXRlbXB0eSZxdW90O2AKCS8vIEVSQzIwIG93bmVyIGFkZHJlc3MgRU5VTSAoMCBpbnZhbGlkLCAxIE1vZHVsZUFjY291bnQsIDIgZXh0ZXJuYWwgYWRkcmVzcwoJQ29udHJhY3RPd25lciBPd25lciBgcHJvdG9idWY6JnF1b3Q7dmFyaW50LDQsb3B0LG5hbWU9Y29udHJhY3Rfb3duZXIsanNvbj1jb250cmFjdE93bmVyLHByb3RvMyxlbnVtPWV2bW9zLmVyYzIwLnYxLk93bmVyJnF1b3Q7IGpzb246JnF1b3Q7Y29udHJhY3Rfb3duZXIsb21pdGVtcHR5JnF1b3Q7YAp9Cg=="}}),t._v(" "),e("h3",{attrs:{id:"token-pair-id"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#token-pair-id"}},[t._v("#")]),t._v(" Token pair ID")]),t._v(" "),e("p",[t._v("The unique identifier of a "),e("code",[t._v("TokenPair")]),t._v(" is obtained by obtaining the SHA256 hash of the ERC20 hex contract address and the Coin denomination using the following function:")]),t._v(" "),e("tm-code-block",{staticClass:"codeblock",attrs:{language:"tsx",base64:"dG9rZW5QYWlySWQgPSBzaGEyNTYoZXJjMjAgKyAmcXVvdDt8JnF1b3Q7ICsgZGVub20pCg=="}}),t._v(" "),e("h3",{attrs:{id:"token-origin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#token-origin"}},[t._v("#")]),t._v(" Token Origin")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("ConvertCoin")]),t._v(" and "),e("code",[t._v("ConvertERC20")]),t._v(" functionalities use the owner field to check whether the token being used is a native Coin or a native ERC20. The field is based on the token registration proposal type ("),e("code",[t._v("RegisterCoinProposal")]),t._v(" = 1, "),e("code",[t._v("RegisterERC20Proposal")]),t._v(" = 2).")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("Owner")]),t._v(" enumerates the ownership of a ERC20 contract.")]),t._v(" "),e("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"dHlwZSBPd25lciBpbnQzMgoKY29uc3QgKAoJLy8gT1dORVJfVU5TUEVDSUZJRUQgZGVmaW5lcyBhbiBpbnZhbGlkL3VuZGVmaW5lZCBvd25lci4KCU9XTkVSX1VOU1BFQ0lGSUVEIE93bmVyID0gMAoJLy8gT1dORVJfTU9EVUxFIGVyYzIwIGlzIG93bmVkIGJ5IHRoZSBlcmMyMCBtb2R1bGUgYWNjb3VudC4KCU9XTkVSX01PRFVMRSBPd25lciA9IDEKCS8vIEVYVEVSTkFMIGVyYzIwIGlzIG93bmVkIGJ5IGFuIGV4dGVybmFsIGFjY291bnQuCglPV05FUl9FWFRFUk5BTCBPd25lciA9IDIKKQo="}}),t._v(" "),e("p",[t._v("The "),e("code",[t._v("Owner")]),t._v(" can be checked with the following helper functions:")]),t._v(" "),e("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gSXNOYXRpdmVDb2luIHJldHVybnMgdHJ1ZSBpZiB0aGUgb3duZXIgb2YgdGhlIEVSQzIwIGNvbnRyYWN0IGlzIHRoZQovLyBlcmMyMCBtb2R1bGUgYWNjb3VudApmdW5jICh0cCBUb2tlblBhaXIpIElzTmF0aXZlQ29pbigpIGJvb2wgewoJcmV0dXJuIHRwLkNvbnRyYWN0T3duZXIgPT0gT1dORVJfTU9EVUxFCn0KCi8vIElzTmF0aXZlRVJDMjAgcmV0dXJucyB0cnVlIGlmIHRoZSBvd25lciBvZiB0aGUgRVJDMjAgY29udHJhY3Qgbm90IHRoZQovLyBlcmMyMCBtb2R1bGUgYWNjb3VudApmdW5jICh0cCBUb2tlblBhaXIpIElzTmF0aXZlRVJDMjAoKSBib29sIHsKCXJldHVybiB0cC5Db250cmFjdE93bmVyID09IE9XTkVSX0VYVEVSTkFMCn0K"}}),t._v(" "),e("h3",{attrs:{id:"token-pair-by-erc20-and-by-denom"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#token-pair-by-erc20-and-by-denom"}},[t._v("#")]),t._v(" Token Pair by ERC20 and by Denom")]),t._v(" "),e("p",[e("code",[t._v("TokenPairByERC20")]),t._v(" and "),e("code",[t._v("TokenPairByDenom")]),t._v(" are additional state objects for querying a token pair id.")]),t._v(" "),e("h2",{attrs:{id:"genesis-state"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#genesis-state"}},[t._v("#")]),t._v(" Genesis State")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("x/erc20")]),t._v(" module's "),e("code",[t._v("GenesisState")]),t._v(" defines the state necessary for initializing the chain from a previous exported height. It contains the module parameters and the registered token pairs :")]),t._v(" "),e("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gR2VuZXNpc1N0YXRlIGRlZmluZXMgdGhlIG1vZHVsZSdzIGdlbmVzaXMgc3RhdGUuCnR5cGUgR2VuZXNpc1N0YXRlIHN0cnVjdCB7CgkvLyBtb2R1bGUgcGFyYW1ldGVycwoJUGFyYW1zIFBhcmFtcyBgcHJvdG9idWY6JnF1b3Q7Ynl0ZXMsMSxvcHQsbmFtZT1wYXJhbXMscHJvdG8zJnF1b3Q7IGpzb246JnF1b3Q7cGFyYW1zJnF1b3Q7YAoJLy8gcmVnaXN0ZXJlZCB0b2tlbiBwYWlycwoJVG9rZW5QYWlycyBbXVRva2VuUGFpciBgcHJvdG9idWY6JnF1b3Q7Ynl0ZXMsMixyZXAsbmFtZT10b2tlbl9wYWlycyxqc29uPXRva2VuUGFpcnMscHJvdG8zJnF1b3Q7IGpzb246JnF1b3Q7dG9rZW5fcGFpcnMmcXVvdDtgCn0K"}})],1)}),[],!1,null,null,null);e.default=o.exports}}]);