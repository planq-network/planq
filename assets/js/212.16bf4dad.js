(window.webpackJsonp=window.webpackJsonp||[]).push([[212],{654:function(t,a,e){"use strict";e.r(a);var s=e(1),o=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"migrations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#migrations"}},[t._v("#")]),t._v(" Migrations")]),t._v(" "),a("h2",{attrs:{id:"state-migration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#state-migration"}},[t._v("#")]),t._v(" State Migration")]),t._v(" "),a("h2",{attrs:{id:"genesis-migration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#genesis-migration"}},[t._v("#")]),t._v(" Genesis Migration")]),t._v(" "),a("h3",{attrs:{id:"manual-genesis-migration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#manual-genesis-migration"}},[t._v("#")]),t._v(" Manual Genesis Migration")]),t._v(" "),a("p",[t._v("Planq can dump the entire application state to a JSON file. This, besides upgrades, can be\nuseful for manual analysis of the state at a given height.")]),t._v(" "),a("p",[t._v("Export state with:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"cGxhbnFkIGV4cG9ydCAmZ3Q7IG5ld19nZW5lc2lzLmpzb24K"}}),t._v(" "),a("p",[t._v("You can also export state from a particular height (at the end of processing the block of that height):")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"cGxhbnFkIGV4cG9ydCAtLWhlaWdodCBbaGVpZ2h0XSAmZ3Q7IG5ld19nZW5lc2lzLmpzb24K"}}),t._v(" "),a("p",[t._v("If you plan to start a new network for 0 height (i.e genesis) from the exported state, export with the "),a("code",[t._v("--for-zero-height")]),t._v(" flag:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"cGxhbnFkIGV4cG9ydCAtLWhlaWdodCBbaGVpZ2h0XSAtLWZvci16ZXJvLWhlaWdodCAmZ3Q7IG5ld19nZW5lc2lzLmpzb24K"}}),t._v(" "),a("p",[t._v("Then, replace the old "),a("code",[t._v("genesis.json")]),t._v(" with "),a("code",[t._v("new_genesis.json")]),t._v(".")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"Y3AgLWYgZ2VuZXNpcy5qc29uIG5ld19nZW5lc2lzLmpzb24KbXYgbmV3X2dlbmVzaXMuanNvbiBnZW5lc2lzLmpzb24K"}}),t._v(" "),a("p",[t._v("At this point, you might want to run a script to update the exported genesis into a genesis state that is compatible with your new version.")]),t._v(" "),a("p",[t._v("You can use the "),a("code",[t._v("migrate")]),t._v(" command to migrate from a given version to the next one (eg: "),a("code",[t._v("v0.X.X")]),t._v(" to "),a("code",[t._v("v1.X.X")]),t._v("):")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"cGxhbnFkIG1pZ3JhdGUgVEFSR0VUX1ZFUlNJT04gR0VORVNJU19GSUxFIC0tY2hhaW4taWQ9Jmx0O25ld19jaGFpbl9pZCZndDsgLS1nZW5lc2lzLXRpbWU9Jmx0O3l5eXktbW0tZGRUaGg6bW06c3NaJmd0Owo="}})],1)}),[],!1,null,null,null);a.default=o.exports}}]);