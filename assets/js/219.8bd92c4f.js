(window.webpackJsonp=window.webpackJsonp||[]).push([[219],{721:function(e,t,a){"use strict";a.r(t);var s=a(1),n=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"trace-transactions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#trace-transactions"}},[e._v("#")]),e._v(" Trace Transactions")]),e._v(" "),t("p",{attrs:{synopsis:""}},[e._v("Learn how to trace transactions and blocks on Planq.")]),e._v(" "),t("p",[e._v("This guide will cover the following topics:")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#basic-evm-tracing-with-js"}},[e._v("basic EVM tracing with JS")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#filtered-evm-tracing-with-js"}},[e._v("filtered EVM tracing with JS")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#json-rpc-debugtrace-endpoints"}},[e._v("JSON-RPC "),t("code",[e._v("debug_trace*")]),e._v(" endpoints")])])]),e._v(" "),t("h2",{attrs:{id:"basic-evm-tracing-with-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#basic-evm-tracing-with-js"}},[e._v("#")]),e._v(" Basic EVM Tracing with JS")]),e._v(" "),t("p",[e._v("Tracing a transaction means requesting an Planq node to re-execute the desired transaction with varying degrees of data collection.")]),e._v(" "),t("h3",{attrs:{id:"tracing-prerequisites"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tracing-prerequisites"}},[e._v("#")]),e._v(" Tracing Prerequisites")]),e._v(" "),t("p",[e._v("Re-executing a transaction has a few prerequisites to be met. All historical state accessed by the transaction must be available, including:")]),e._v(" "),t("ul",[t("li",[e._v("Balance, nonce, bytecode, and storage of both the recipient as well as all internally invoked contracts")]),e._v(" "),t("li",[e._v("Block metadata referenced during execution of the outer as well as all internally created transactions")]),e._v(" "),t("li",[e._v("Intermediate state generated by all preceding transactions contained in the same block as well as the one being traced")])]),e._v(" "),t("p",[e._v("This means there are limits on the transactions that can be traced and imported based on the synchronization and pruning configuration of a node.")]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("Archive nodes")]),e._v(": retain all historical data back to genesis, can trace arbitrary transactions at any point in the history of the chain.")]),e._v(" "),t("li",[t("strong",[e._v("Fully synced nodes")]),e._v(": transactions within a recent range (depending on how much history is stored) are accessible.")]),e._v(" "),t("li",[t("strong",[e._v("Light synced nodes")]),e._v(": these nodes retrieve data on demand, so in theory they can trace transactions for which all required historical state is readily available in the network (however, data availability cannot be reasonably assumed).")])]),e._v(" "),t("h3",{attrs:{id:"basic-traces"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#basic-traces"}},[e._v("#")]),e._v(" Basic Traces")]),e._v(" "),t("p",[e._v("The simplest type of transaction trace that "),t("a",{attrs:{href:"https://geth.ethereum.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Geth"),t("OutboundLink")],1),e._v(" can generate are raw EVM opcode traces. For every VM instruction the transaction executes, a structured log entry is emitted, contained all contextual metadata deemed useful. This includes:")]),e._v(" "),t("ul",[t("li",[e._v("program counter")]),e._v(" "),t("li",[e._v("opcode name & cost")]),e._v(" "),t("li",[e._v("remaining gas")]),e._v(" "),t("li",[e._v("execution depth")]),e._v(" "),t("li",[e._v("occurred errors")])]),e._v(" "),t("p",[e._v("as well as (optionally) the execution stack, execution memory, and contract storage.")]),e._v(" "),t("p",[e._v("The entire output of a raw EVM opcode trace is a JSON object having a few metadata fields: consumed gas, failure status, return value, and a list of opcode entries:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"json",base64:"ewogICZxdW90O2dhcyZxdW90OzogICAgICAgICAyNTUyMywKICAmcXVvdDtmYWlsZWQmcXVvdDs6ICAgICAgZmFsc2UsCiAgJnF1b3Q7cmV0dXJuVmFsdWUmcXVvdDs6ICZxdW90OyZxdW90OywKICAmcXVvdDtzdHJ1Y3RMb2dzJnF1b3Q7OiAgW10KfQo="}}),e._v(" "),t("p",[e._v("An example log for a single opcode entry has the following format:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"json",base64:"ewogICZxdW90O3BjJnF1b3Q7OiAgICAgIDQ4LAogICZxdW90O29wJnF1b3Q7OiAgICAgICZxdW90O0RJViZxdW90OywKICAmcXVvdDtnYXNDb3N0JnF1b3Q7OiA1LAogICZxdW90O2dhcyZxdW90OzogICAgIDY0NTMyLAogICZxdW90O2RlcHRoJnF1b3Q7OiAgIDEsCiAgJnF1b3Q7ZXJyb3ImcXVvdDs6ICAgbnVsbCwKICAmcXVvdDtzdGFjayZxdW90OzogWwogICAgJnF1b3Q7MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBmZmZmZmZmZiZxdW90OywKICAgICZxdW90OzAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAmcXVvdDssCiAgICAmcXVvdDsyZGYwN2ZiYWFiYmU0MGUzMjQ0NDQ1YWYzMDc1OTM1MmUzNDhlYzhiZWJkNGRkNzU0NjdhOWYyOWVjNTVkOThkJnF1b3Q7CiAgXSwKICAmcXVvdDttZW1vcnkmcXVvdDs6IFsKICAgICZxdW90OzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAmcXVvdDssCiAgICAmcXVvdDswMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJnF1b3Q7LAogICAgJnF1b3Q7MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA2MCZxdW90OwogIF0sCiAgJnF1b3Q7c3RvcmFnZSZxdW90OzogewogIH0KfQo="}}),e._v(" "),t("h3",{attrs:{id:"limits-of-basic-traces"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#limits-of-basic-traces"}},[e._v("#")]),e._v(" Limits of Basic Traces")]),e._v(" "),t("p",[e._v("Although raw opcode traces generated above are useful, having an individual log entry for every single opcode is too low level for most use cases, and will require developers to create additional tools to post-process the traces. Additionally, a single opcode trace can easily be hundreds of megabytes, making them very resource intensive to extract from the node and process extenally.")]),e._v(" "),t("p",[e._v("To avoid these issues, "),t("a",{attrs:{href:"https://geth.ethereum.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Geth"),t("OutboundLink")],1),e._v(" supports running custom JavaScript traces "),t("em",[e._v("within")]),e._v(" the Planq (or any EVM-compatible) node, which have full access to the EVM stack, memory, and contract storage. This means developers only have to gather data that they actually need, and do any processing at the source.")]),e._v(" "),t("h2",{attrs:{id:"filtered-evm-tracing-with-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#filtered-evm-tracing-with-js"}},[e._v("#")]),e._v(" Filtered EVM Tracing with JS")]),e._v(" "),t("p",[e._v("Basic traces can include the complete status of the EVM at every point in the transaction's execution, which is huge space-wise. Usually, developers are only interested in a small subset of this information, which can be obtained by specifying a JavaScript filter.")]),e._v(" "),t("h3",{attrs:{id:"running-a-simple-trace"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#running-a-simple-trace"}},[e._v("#")]),e._v(" Running a Simple Trace")]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",[t("strong",[e._v("Note")]),e._v(": "),t("code",[e._v("debug.traceTransaction")]),e._v(" must be invoked from within the "),t("a",{attrs:{href:"https://geth.ethereum.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Geth"),t("OutboundLink")],1),e._v(" console, although it can be invoked from outside the node using JSON-RPC (eg. using Curl), as seen in the "),t("a",{attrs:{href:"#debugtrace-endpoints"}},[e._v("following section")]),e._v(". If developers want to use "),t("code",[e._v("debug.traceTransaction")]),e._v(" as it is used here, maintainence of a node is required, so see "),t("RouterLink",{attrs:{to:"/planq/docs/validators/quickstart/run_node.html"}},[e._v("this document")]),e._v(".")],1)]),e._v(" "),t("ol",[t("li",[e._v("Create a file, "),t("code",[e._v("filterTrace_1.js")]),e._v(", with this content:")])]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"js",base64:"dHJhY2VyID0gZnVuY3Rpb24odHgpIHsKICByZXR1cm4gZGVidWcudHJhY2VUcmFuc2FjdGlvbih0eCwge3RyYWNlcjoKICAgICAgJ3snICsKICAgICAgICAncmV0VmFsOiBbXSwnICsKICAgICAgICAnc3RlcDogZnVuY3Rpb24obG9nLGRiKSB7dGhpcy5yZXRWYWwucHVzaChsb2cuZ2V0UEMoKSArICZxdW90OzomcXVvdDsgKyBsb2cub3AudG9TdHJpbmcoKSl9LCcgKwogICAgICAgICdmYXVsdDogZnVuY3Rpb24obG9nLGRiKSB7dGhpcy5yZXRWYWwucHVzaCgmcXVvdDtGQVVMVDogJnF1b3Q7ICsgSlNPTi5zdHJpbmdpZnkobG9nKSl9LCcgKwogICAgICAgICdyZXN1bHQ6IGZ1bmN0aW9uKGN0eCxkYikge3JldHVybiB0aGlzLnJldFZhbH0nICsKICAgICAgJ30nCiAgfSkgLy8gcmV0dXJuIGRlYnVnLnRyYWNlVHJhbnNhY3Rpb24gLi4uCn0gICAvLyB0cmFjZXIgPSBmdW5jdGlvbiAuLi4K"}}),e._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[t("p",[e._v("Run the "),t("a",{attrs:{href:"https://geth.ethereum.org/docs/interface/javascript-console",target:"_blank",rel:"noopener noreferrer"}},[e._v("JavaScript console"),t("OutboundLink")],1),e._v(".")])]),e._v(" "),t("li",[t("p",[e._v("Get a hash of a recent transaction.")])]),e._v(" "),t("li",[t("p",[e._v("Run this command to run the script:")])])]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"bG9hZFNjcmlwdCgmcXVvdDtmaWx0ZXJUcmFjZV8xLmpzJnF1b3Q7KQo="}}),e._v(" "),t("ol",{attrs:{start:"5"}},[t("li",[e._v("Run the tracer from the script:")])]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"dHJhY2VyKCZxdW90OyZsdDtoYXNoIG9mIHRyYW5zYWN0aW9uJmd0OyZxdW90OykK"}}),e._v(" "),t("p",[e._v("The bottom of the output looks similar to:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"JnF1b3Q7MzM2NjpQT1AmcXVvdDssICZxdW90OzMzNjc6SlVNUCZxdW90OywgJnF1b3Q7MTM1NTpKVU1QREVTVCZxdW90OywgJnF1b3Q7MTM1NjpQVVNIMSZxdW90OywgJnF1b3Q7MTM1ODpNTE9BRCZxdW90OywgJnF1b3Q7MTM1OTpEVVAxJnF1b3Q7LCAmcXVvdDsxMzYwOkRVUDMmcXVvdDssICZxdW90OzEzNjE6SVNaRVJPJnF1b3Q7LCAmcXVvdDsxMzYyOklTWkVSTyZxdW90OywKJnF1b3Q7MTM2MzpJU1pFUk8mcXVvdDssICZxdW90OzEzNjQ6SVNaRVJPJnF1b3Q7LCAmcXVvdDsxMzY1OkRVUDImcXVvdDssICZxdW90OzEzNjY6TVNUT1JFJnF1b3Q7LCAmcXVvdDsxMzY3OlBVU0gxJnF1b3Q7LCAmcXVvdDsxMzY5OkFERCZxdW90OywgJnF1b3Q7MTM3MDpTV0FQMiZxdW90OywgJnF1b3Q7MTM3MTpQT1AmcXVvdDssICZxdW90OzEzNzI6UE9QJnF1b3Q7LCAmcXVvdDsxMzczOlBVU0gxJnF1b3Q7LAomcXVvdDsxMzc1Ok1MT0FEJnF1b3Q7LCAmcXVvdDsxMzc2OkRVUDEmcXVvdDssICZxdW90OzEzNzc6U1dBUDImcXVvdDssICZxdW90OzEzNzg6U1VCJnF1b3Q7LCAmcXVvdDsxMzc5OlNXQVAxJnF1b3Q7LCAmcXVvdDsxMzgwOlJFVFVSTiZxdW90OywgLi4uCg=="}}),e._v(" "),t("ol",{attrs:{start:"6"}},[t("li",[e._v("This output isn't very readable. Run this command to get a more readable output with each string on its own line:")])]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"ICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh0cmFjZXIoJnF1b3Q7Jmx0O2hhc2ggb2YgdHJhbnNhY3Rpb24mZ3Q7JnF1b3Q7KSwgbnVsbCwgMikpCg=="}}),e._v(" "),t("p",[e._v("The JSON.stringify function's documentation is "),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),t("OutboundLink")],1),e._v(". If we just return the output, we get "),t("code",[e._v("\\n")]),e._v(" for newlines, which is why we need to use "),t("code",[e._v("console.log")]),e._v(".")]),e._v(" "),t("h3",{attrs:{id:"how-does-it-work"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#how-does-it-work"}},[e._v("#")]),e._v(" How Does it Work?")]),e._v(" "),t("p",[e._v("We call the same "),t("code",[e._v("debug.traceTransaction")]),e._v(" function used for "),t("a",{attrs:{href:"#basic-traces"}},[e._v("basic traces")]),e._v(", but with a new parameter, "),t("code",[e._v("tracer")]),e._v(". This parameter is a string, which is the JavaScript object we use. In the case of the trace above, it is:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"js",base64:"ewogICByZXRWYWw6IFtdLAogICBzdGVwOiBmdW5jdGlvbihsb2csZGIpIHt0aGlzLnJldFZhbC5wdXNoKGxvZy5nZXRQQygpICsgJnF1b3Q7OiZxdW90OyArIGxvZy5vcC50b1N0cmluZygpKX0sCiAgIGZhdWx0OiBmdW5jdGlvbihsb2csZGIpIHt0aGlzLnJldFZhbC5wdXNoKCZxdW90O0ZBVUxUOiAmcXVvdDsgKyBKU09OLnN0cmluZ2lmeShsb2cpKX0sCiAgIHJlc3VsdDogZnVuY3Rpb24oY3R4LGRiKSB7cmV0dXJuIHRoaXMucmV0VmFsfQp9Cg=="}}),e._v(" "),t("p",[e._v("This object has to have three member functions:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("step")]),e._v(", called for each opcode")]),e._v(" "),t("li",[t("code",[e._v("fault")]),e._v(", called if there is a problem in the execution")]),e._v(" "),t("li",[t("code",[e._v("result")]),e._v(", called to produce the results that are returned by "),t("code",[e._v("debug.traceTransaction")]),e._v(" after the execution is done")])]),e._v(" "),t("p",[e._v("It can have additional members. In this case, we use "),t("code",[e._v("retVal")]),e._v(" to store the list of strings that we'll return in "),t("code",[e._v("result")]),e._v(".")]),e._v(" "),t("p",[e._v("The "),t("code",[e._v("step")]),e._v(" function here adds to "),t("code",[e._v("retVal")]),e._v(": the program counter, and the name of the opcode there. Then, in "),t("code",[e._v("result")]),e._v(", we return this list to be sent to the caller.")]),e._v(" "),t("h3",{attrs:{id:"actual-filtering"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#actual-filtering"}},[e._v("#")]),e._v(" Actual Filtering")]),e._v(" "),t("p",[e._v("For actual filtered tracing, we need an "),t("code",[e._v("if")]),e._v(" statement to only log revelant information. For example, if we are interested in the transaction's interaction with storage, we might use:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"js",base64:"dHJhY2VyID0gZnVuY3Rpb24odHgpIHsKICAgICAgcmV0dXJuIGRlYnVnLnRyYWNlVHJhbnNhY3Rpb24odHgsIHt0cmFjZXI6CiAgICAgICd7JyArCiAgICAgICAgICdyZXRWYWw6IFtdLCcgKwogICAgICAgICAnc3RlcDogZnVuY3Rpb24obG9nLGRiKSB7JyArCiAgICAgICAgICcgICBpZihsb2cub3AudG9OdW1iZXIoKSA9PSAweDU0KSAnICsKICAgICAgICAgJyAgICAgdGhpcy5yZXRWYWwucHVzaChsb2cuZ2V0UEMoKSArICZxdW90OzogU0xPQUQmcXVvdDspOycgKwogICAgICAgICAnICAgaWYobG9nLm9wLnRvTnVtYmVyKCkgPT0gMHg1NSkgJyArCiAgICAgICAgICcgICAgIHRoaXMucmV0VmFsLnB1c2gobG9nLmdldFBDKCkgKyAmcXVvdDs6IFNTVE9SRSZxdW90Oyk7JyArCiAgICAgICAgICd9LCcgKwogICAgICAgICAnZmF1bHQ6IGZ1bmN0aW9uKGxvZyxkYikge3RoaXMucmV0VmFsLnB1c2goJnF1b3Q7RkFVTFQ6ICZxdW90OyArIEpTT04uc3RyaW5naWZ5KGxvZykpfSwnICsKICAgICAgICAgJ3Jlc3VsdDogZnVuY3Rpb24oY3R4LGRiKSB7cmV0dXJuIHRoaXMucmV0VmFsfScgKwogICAgICAnfScKICAgICAgfSkgLy8gcmV0dXJuIGRlYnVnLnRyYWNlVHJhbnNhY3Rpb24gLi4uCn0gICAvLyB0cmFjZXIgPSBmdW5jdGlvbiAuLi4K"}}),e._v(" "),t("p",[e._v("The "),t("code",[e._v("step")]),e._v(" function here looks at the opcode number of the op, and only pushes an entry if the opcode is "),t("code",[e._v("SLOAD")]),e._v(" or "),t("code",[e._v("SSTORE")]),e._v(" ("),t("a",{attrs:{href:"https://github.com/wolflo/evm-opcodes/",target:"_blank",rel:"noopener noreferrer"}},[e._v("here is a list of all EVM opcodes and their corresponding numbers"),t("OutboundLink")],1),e._v("). We could have used "),t("code",[e._v("log.op.toString")]),e._v(" instead, but it is faster to compare numbers rather than strings.")]),e._v(" "),t("p",[e._v("The output looks similar to this:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"WwogICZxdW90OzU5MjE6IFNMT0FEJnF1b3Q7LAogIC4KICAuCiAgLgogICZxdW90OzI0MTM6IFNTVE9SRSZxdW90OywKICAmcXVvdDsyNDIwOiBTTE9BRCZxdW90OywKICAmcXVvdDsyNDc1OiBTU1RPUkUmcXVvdDssCiAgJnF1b3Q7NjA5NDogU1NUT1JFJnF1b3Q7Cl0K"}}),e._v(" "),t("h3",{attrs:{id:"stack-information"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stack-information"}},[e._v("#")]),e._v(" Stack Information")]),e._v(" "),t("p",[e._v("The trace above tells us the program counter and whether the program read from storage or wrote to it. To know more, you can use the "),t("code",[e._v("log.stack.peek")]),e._v(" function to peek into the stack. "),t("code",[e._v("log.stack.peek(0)")]),e._v(" is the stack top, "),t("code",[e._v("log.stack.peek(1)")]),e._v(" is the entry beow it, etc. The values returned by "),t("code",[e._v("log.stack.peek")]),e._v(" are Go "),t("code",[e._v("big.int")]),e._v(" objects. By default they are converted to JavaScript floating point numbers, so you need toString(16) to get them as hexadecimals, which is how we normally represent 256-bit values such as storage cells and their content.")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"js",base64:"dHJhY2VyID0gZnVuY3Rpb24odHgpIHsKICAgICAgcmV0dXJuIGRlYnVnLnRyYWNlVHJhbnNhY3Rpb24odHgsIHt0cmFjZXI6CiAgICAgICd7JyArCiAgICAgICAgICdyZXRWYWw6IFtdLCcgKwogICAgICAgICAnc3RlcDogZnVuY3Rpb24obG9nLGRiKSB7JyArCiAgICAgICAgICcgICBpZihsb2cub3AudG9OdW1iZXIoKSA9PSAweDU0KSAnICsKICAgICAgICAgJyAgICAgdGhpcy5yZXRWYWwucHVzaChsb2cuZ2V0UEMoKSArICZxdW90OzogU0xPQUQgJnF1b3Q7ICsgJyArCiAgICAgICAgICcgICAgICAgIGxvZy5zdGFjay5wZWVrKDApLnRvU3RyaW5nKDE2KSk7JyArCiAgICAgICAgICcgICBpZihsb2cub3AudG9OdW1iZXIoKSA9PSAweDU1KSAnICsKICAgICAgICAgJyAgICAgdGhpcy5yZXRWYWwucHVzaChsb2cuZ2V0UEMoKSArICZxdW90OzogU1NUT1JFICZxdW90OyArJyArCiAgICAgICAgICcgICAgICAgIGxvZy5zdGFjay5wZWVrKDApLnRvU3RyaW5nKDE2KSArICZxdW90OyAmbHQ7LSAmcXVvdDsgKycgKwogICAgICAgICAnICAgICAgICBsb2cuc3RhY2sucGVlaygxKS50b1N0cmluZygxNikpOycgKwogICAgICAgICAnfSwnICsKICAgICAgICAgJ2ZhdWx0OiBmdW5jdGlvbihsb2csZGIpIHt0aGlzLnJldFZhbC5wdXNoKCZxdW90O0ZBVUxUOiAmcXVvdDsgKyBKU09OLnN0cmluZ2lmeShsb2cpKX0sJyArCiAgICAgICAgICdyZXN1bHQ6IGZ1bmN0aW9uKGN0eCxkYikge3JldHVybiB0aGlzLnJldFZhbH0nICsKICAgICAgJ30nCiAgICAgIH0pIC8vIHJldHVybiBkZWJ1Zy50cmFjZVRyYW5zYWN0aW9uIC4uLgp9ICAgLy8gdHJhY2VyID0gZnVuY3Rpb24gLi4uCg=="}}),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"WwogICZxdW90OzU5MjE6IFNMT0FEIDAmcXVvdDssCiAgLgogIC4KICAuCiAgJnF1b3Q7MjQxMzogU1NUT1JFIDNmMGFmMGE3YTNlZDE3ZjViYTZhOTNlMGEyYTA1ZTc2NmVkNjdiZjgyMTk1ZDJkZDE1ZmVlYWQzNzQ5YTU3NWQgJmx0Oy0gZmI4NjI5YWQxM2Q5YTEyNDU2JnF1b3Q7LAogICZxdW90OzI0MjA6IFNMT0FEIGNjMzliMTc3ZGQzYTdmNTBkNGMwOTUyNzU4NDA0ODM3OGE2OTJhZWQyNGQzMWQyZWFiZWRkYjdmM2MwNDE4NzAmcXVvdDssCiAgJnF1b3Q7MjQ3NTogU1NUT1JFIGNjMzliMTc3ZGQzYTdmNTBkNGMwOTUyNzU4NDA0ODM3OGE2OTJhZWQyNGQzMWQyZWFiZWRkYjdmM2MwNDE4NzAgJmx0Oy0gMzU4YzNkZTY5MWJkMTkmcXVvdDssCiAgJnF1b3Q7NjA5NDogU1NUT1JFIDAgJmx0Oy0gMSZxdW90OwpdCg=="}}),e._v(" "),t("p",[e._v("There are several other facets of filtered EVM tracing, including:")]),e._v(" "),t("ul",[t("li",[e._v("determining operation results")]),e._v(" "),t("li",[e._v("dealing with calls between contracts")]),e._v(" "),t("li",[e._v("accessing memory")]),e._v(" "),t("li",[e._v("using the "),t("code",[e._v("db")]),e._v(" parameter to know the state of the chain at the time of execution")])]),e._v(" "),t("p",[e._v("This information is covered in "),t("a",{attrs:{href:"https://geth.ethereum.org/docs/rpc/ns-debug#javascript-based-tracing",target:"_blank",rel:"noopener noreferrer"}},[e._v("this reference"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h2",{attrs:{id:"json-rpc-debug-trace-endpoints"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#json-rpc-debug-trace-endpoints"}},[e._v("#")]),e._v(" JSON-RPC "),t("code",[e._v("debug_trace*")]),e._v(" Endpoints")]),e._v(" "),t("p",[e._v("Planq supports the following "),t("code",[e._v("debug_trace*")]),e._v(" JSON-RPC Methods, which follow "),t("a",{attrs:{href:"https://geth.ethereum.org/docs/rpc/ns-debug",target:"_blank",rel:"noopener noreferrer"}},[e._v("Geth's debug API guidelines"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h3",{attrs:{id:"debug-tracetransaction"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#debug-tracetransaction"}},[e._v("#")]),e._v(" "),t("code",[e._v("debug_traceTransaction")])]),e._v(" "),t("p",[e._v("The "),t("code",[e._v("traceTransaction")]),e._v(" debugging method will attempt to run the transaction in the exact same manner as it was executed on the network. It will replay any transaction that may have been executed prior to this one, before it will finally attempt to execute the transaction that corresponds to the given hash.")]),e._v(" "),t("p",[t("strong",[e._v("Parameters")]),e._v(":")]),e._v(" "),t("ul",[t("li",[e._v("trace configuration")])]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"IyBSZXF1ZXN0CmN1cmwgLVggUE9TVCAtLWRhdGEgJ3smcXVvdDtqc29ucnBjJnF1b3Q7OiZxdW90OzIuMCZxdW90OywmcXVvdDttZXRob2QmcXVvdDs6JnF1b3Q7ZGVidWdfdHJhY2VUcmFuc2FjdGlvbiZxdW90OywmcXVvdDtwYXJhbXMmcXVvdDs6WyZsdDt0cmFuc2FjdGlvbiBoYXNoJmd0OywgeyZxdW90O3RyYWNlciZxdW90OzogJnF1b3Q7e2RhdGE6IFtdLCBmYXVsdDogZnVuY3Rpb24obG9nKSB7fSwgc3RlcDogZnVuY3Rpb24obG9nKSB7IGlmKGxvZy5vcC50b1N0cmluZygpID09IFwmcXVvdDtDQUxMXCZxdW90OykgdGhpcy5kYXRhLnB1c2gobG9nLnN0YWNrLnBlZWsoMCkpOyB9LCByZXN1bHQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5kYXRhOyB9fSZxdW90O31dLCZxdW90O2lkJnF1b3Q7OjF9JyAtSCAmcXVvdDtDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb24mcXVvdDsgaHR0cHM6Ly9ldm0tcnBjLnBsYW5xLm5ldHdvcmsKCiMgUmVzdWx0CnsmcXVvdDtqc29ucnBjJnF1b3Q7OiZxdW90OzIuMCZxdW90OywmcXVvdDtpZCZxdW90OzoxLCZxdW90O3Jlc3VsdCZxdW90OzpbeyZxdW90O3Jlc3VsdCZxdW90OzpbJnF1b3Q7Njg0MTAmcXVvdDssICZxdW90OzUxNDcwJnF1b3Q7XX1dfQo="}}),e._v(" "),t("h3",{attrs:{id:"debug-traceblockbynumber"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#debug-traceblockbynumber"}},[e._v("#")]),e._v(" "),t("code",[e._v("debug_traceBlockByNumber")])]),e._v(" "),t("p",[e._v("The "),t("code",[e._v("traceBlockByNumber")]),e._v(" endpoint accepts a block number, and will replay the block that is already present in the database.")]),e._v(" "),t("p",[t("strong",[e._v("Parameters")]),e._v(":")]),e._v(" "),t("ul",[t("li",[e._v("trace configuration")])]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"IyBSZXF1ZXN0CmN1cmwgLVggUE9TVCAtLWRhdGEgJ3smcXVvdDtqc29ucnBjJnF1b3Q7OiZxdW90OzIuMCZxdW90OywmcXVvdDttZXRob2QmcXVvdDs6JnF1b3Q7ZGVidWdfdHJhY2VCbG9ja0J5TnVtYmVyJnF1b3Q7LCZxdW90O3BhcmFtcyZxdW90OzpbJmx0O2Jsb2NrIG51bWJlciZndDssIHsmcXVvdDt0cmFjZXImcXVvdDs6ICZxdW90O3tkYXRhOiBbXSwgZmF1bHQ6IGZ1bmN0aW9uKGxvZykge30sIHN0ZXA6IGZ1bmN0aW9uKGxvZykgeyBpZihsb2cub3AudG9TdHJpbmcoKSA9PSBcJnF1b3Q7Q0FMTFwmcXVvdDspIHRoaXMuZGF0YS5wdXNoKGxvZy5zdGFjay5wZWVrKDApKTsgfSwgcmVzdWx0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuZGF0YTsgfX0mcXVvdDt9XSwmcXVvdDtpZCZxdW90OzoxfScgLUggJnF1b3Q7Q29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uJnF1b3Q7IGh0dHBzOi8vZXZtLXJwYy5wbGFucS5uZXR3b3JrCgojIFJlc3VsdAp7JnF1b3Q7anNvbnJwYyZxdW90OzomcXVvdDsyLjAmcXVvdDssJnF1b3Q7aWQmcXVvdDs6MSwmcXVvdDtyZXN1bHQmcXVvdDs6W3smcXVvdDtyZXN1bHQmcXVvdDs6WyZxdW90OzY4NDEwJnF1b3Q7LCAmcXVvdDs1MTQ3MCZxdW90O119XX0K"}}),e._v(" "),t("h3",{attrs:{id:"debug-traceblockbyhash"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#debug-traceblockbyhash"}},[e._v("#")]),e._v(" "),t("code",[e._v("debug_traceBlockByHash")])]),e._v(" "),t("p",[e._v("The "),t("code",[e._v("traceBlockByNumber")]),e._v(" endpoint accepts a block hash, and will replay the block that is already present in the database.")]),e._v(" "),t("p",[t("strong",[e._v("Parameters")]),e._v(":")]),e._v(" "),t("ul",[t("li",[e._v("trace configuration")])]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"IyBSZXF1ZXN0CmN1cmwgLVggUE9TVCAtLWRhdGEgJ3smcXVvdDtqc29ucnBjJnF1b3Q7OiZxdW90OzIuMCZxdW90OywmcXVvdDttZXRob2QmcXVvdDs6JnF1b3Q7ZGVidWdfdHJhY2VCbG9ja0J5TnVtYmVyJnF1b3Q7LCZxdW90O3BhcmFtcyZxdW90OzpbJmx0O2Jsb2NrIGhhc2gmZ3Q7LCB7JnF1b3Q7dHJhY2VyJnF1b3Q7OiAmcXVvdDt7ZGF0YTogW10sIGZhdWx0OiBmdW5jdGlvbihsb2cpIHt9LCBzdGVwOiBmdW5jdGlvbihsb2cpIHsgaWYobG9nLm9wLnRvU3RyaW5nKCkgPT0gXCZxdW90O0NBTExcJnF1b3Q7KSB0aGlzLmRhdGEucHVzaChsb2cuc3RhY2sucGVlaygwKSk7IH0sIHJlc3VsdDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmRhdGE7IH19JnF1b3Q7fV0sJnF1b3Q7aWQmcXVvdDs6MX0nIC1IICZxdW90O0NvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvbiZxdW90OyBodHRwczovL2V2bS1ycGMucGxhbnEubmV0d29yawoKIyBSZXN1bHQKeyZxdW90O2pzb25ycGMmcXVvdDs6JnF1b3Q7Mi4wJnF1b3Q7LCZxdW90O2lkJnF1b3Q7OjEsJnF1b3Q7cmVzdWx0JnF1b3Q7Olt7JnF1b3Q7cmVzdWx0JnF1b3Q7OlsmcXVvdDs2ODQxMCZxdW90OywgJnF1b3Q7NTE0NzAmcXVvdDtdfV19Cg=="}}),e._v(" "),t("h2",{attrs:{id:"additional-information"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#additional-information"}},[e._v("#")]),e._v(" Additional Information")]),e._v(" "),t("p",[e._v("See the sources below for details not covered above:")]),e._v(" "),t("ul",[t("li",[t("RouterLink",{attrs:{to:"/planq/docs/developers/json-rpc/endpoints.html"}},[e._v("JSON-RPC Methods on Planq")])],1),e._v(" "),t("li",[t("a",{attrs:{href:"https://geth.ethereum.org/docs/dapp/tracing",target:"_blank",rel:"noopener noreferrer"}},[e._v("Basic EVM Tracing"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://web.archive.org/web/20211215184312/https://geth.ethereum.org/docs/dapp/tracing-filtered",target:"_blank",rel:"noopener noreferrer"}},[e._v("Filtered EVM Tracing"),t("OutboundLink")],1)])])],1)}),[],!1,null,null,null);t.default=n.exports}}]);