(window.webpackJsonp=window.webpackJsonp||[]).push([[241],{686:function(e,t,a){"use strict";a.r(t);var r=a(1),s=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"tendermint-kms"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tendermint-kms"}},[e._v("#")]),e._v(" Tendermint KMS")]),e._v(" "),t("p",{attrs:{synopsis:""}},[e._v("Set up a Key Management System for Planq")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/iqlusioninc/tmkms",target:"_blank",rel:"noopener noreferrer"}},[e._v("Tendermint KMS"),t("OutboundLink")],1),e._v(" is a Key Management Service (KMS) that allows separating key management from Tendermint nodes. In addition it provides other advantages such as:")]),e._v(" "),t("ul",[t("li",[e._v("Improved security and risk management policies")]),e._v(" "),t("li",[e._v("Unified API and support for various HSM (hardware security modules)")]),e._v(" "),t("li",[e._v("Double signing protection (software or hardware based)")])]),e._v(" "),t("p",[e._v("It is recommended that the KMS service runs in a separate physical hosts.")]),e._v(" "),t("h2",{attrs:{id:"install-tendermint-kms-onto-the-node"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-tendermint-kms-onto-the-node"}},[e._v("#")]),e._v(" Install Tendermint KMS onto the node")]),e._v(" "),t("p",[e._v("You will need the following prerequisites:")]),e._v(" "),t("ul",[t("li",[e._v("✅ "),t("strong",[e._v("Rust")]),e._v(" (stable; "),t("strong",[e._v("1.56+")]),e._v("): https://rustup.rs/")]),e._v(" "),t("li",[e._v("✅ "),t("strong",[e._v("C compiler")]),e._v(": e.g. gcc, clang")]),e._v(" "),t("li",[e._v("✅ "),t("strong",[e._v("pkg-config")])]),e._v(" "),t("li",[e._v("✅ "),t("strong",[e._v("libusb")]),e._v(" (1.0+). Install instructions for common platforms\n"),t("ul",[t("li",[t("p",[e._v("✅ Debian/Ubuntu")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"YXB0IGluc3RhbGwgbGlidXNiLTEuMC0wLWRldgo="}})],1),e._v(" "),t("li",[t("p",[e._v("✅ RedHat/CentOS")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"eXVtIGluc3RhbGwgbGlidXNiMS1kZXZlbAo="}})],1),e._v(" "),t("li",[t("p",[e._v("✅ macOS (Homebrew)")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"YnJldyBpbnN0YWxsIGxpYnVzYgo="}})],1)])])]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",[e._v("For "),t("code",[e._v("x86_64")]),e._v(" architecture only:")]),e._v(" "),t("p",[e._v("Configure "),t("code",[e._v("RUSTFLAGS")]),e._v(" environment variable:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"ZXhwb3J0IFJVU1RGTEFHUz0tQ3RhcmdldC1mZWF0dXJlPSthZXMsK3Nzc2UzCg=="}})],1),e._v(" "),t("p",[e._v("We are ready to install KMS. There are 2 ways to do this: compile from source or install with Rusts cargo-install. We’ll use the first option.")]),e._v(" "),t("h3",{attrs:{id:"compile-from-source-code"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#compile-from-source-code"}},[e._v("#")]),e._v(" Compile from source code")]),e._v(" "),t("p",[e._v("The following example adds "),t("code",[e._v("--features=ledger")]),e._v(" to enable Ledger  support.\n"),t("code",[e._v("tmkms")]),e._v(" can be compiled directly from the git repository source code, using the following commands:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"Z2ggcmVwbyBjbG9uZSBpcWx1c2lvbmluYy90bWttcyAmYW1wOyZhbXA7IGNkIHRta21zClsuLi5dCmNhcmdvIGJ1aWxkIC0tcmVsZWFzZSAtLWZlYXR1cmVzPWxlZGdlcgo="}}),e._v(" "),t("p",[e._v("Alternatively, substitute "),t("code",[e._v("--features=yubihsm")]),e._v(" to enable "),t("a",{attrs:{href:"https://www.yubico.com/products/hardware-security-module/",target:"_blank",rel:"noopener noreferrer"}},[e._v("YubiHSM"),t("OutboundLink")],1),e._v(" support.")]),e._v(" "),t("p",[e._v("If successful, it will produce the "),t("code",[e._v("tmkms")]),e._v(" executable located at: "),t("code",[e._v("./target/release/tmkms")]),e._v(".")]),e._v(" "),t("h2",{attrs:{id:"configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[e._v("#")]),e._v(" Configuration")]),e._v(" "),t("p",[e._v("A KMS can be configured using the following HSMs")]),e._v(" "),t("h3",{attrs:{id:"yubihsm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yubihsm"}},[e._v("#")]),e._v(" YubiHSM")]),e._v(" "),t("p",[e._v("Detailed information on how to setup a KMS with "),t("a",{attrs:{href:"https://www.yubico.com/products/hardware-security-module/",target:"_blank",rel:"noopener noreferrer"}},[e._v("YubiHSM 2"),t("OutboundLink")],1),e._v(" can be found "),t("a",{attrs:{href:"https://github.com/iqlusioninc/tmkms/blob/master/README.yubihsm.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h3",{attrs:{id:"ledger-tendermint-app"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ledger-tendermint-app"}},[e._v("#")]),e._v(" Ledger Tendermint app")]),e._v(" "),t("p",[e._v("Detailed information on how to setup a KMS with Ledger Tendermint App can be found "),t("RouterLink",{attrs:{to:"/validators/security/kms_ledger.html"}},[e._v("here")]),e._v(".")],1)],1)}),[],!1,null,null,null);t.default=s.exports}}]);